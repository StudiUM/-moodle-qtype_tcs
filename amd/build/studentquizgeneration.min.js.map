{"version":3,"sources":["../src/studentquizgeneration.js"],"names":["define","$","Y","SELECTORS","PANELISTSSELECTEDCHECKBOXES","PANELISTSCHECKBOXES","QUESTIONSSELECTEDCHECKBOXES","QUESTIONSCHECKBOXES","SUBMITBUTTON","SECTIONSELECTOR","FORMSELECTOR","QUIZNAME","QUESTIONSINCLUDEERROR","PANELISTSINCLUDEERROR","validateform","length","val","prop","show","hide","checkquestionremove","valid","each","find","use","alert","M","core","title","util","get_string","message","on"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Generate quiz for students.\n *\n * @module     mod_concordance/studentquizgeneration\n * @package    mod_concordance\n * @copyright  2020 Université de Montréal\n * @author     Issam Taboubi <issam.taboubi@umontreal.ca>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/yui'],\n    function($, Y) {\n\n        var SELECTORS = {\n            PANELISTSSELECTEDCHECKBOXES: \"input[name^='paneliststoinclude']:checked\",\n            PANELISTSCHECKBOXES: \"input[name^='paneliststoinclude']\",\n            QUESTIONSSELECTEDCHECKBOXES: \"input[name^='questionstoinclude']:checked\",\n            QUESTIONSCHECKBOXES: \"input[name^='questionstoinclude']\",\n            SUBMITBUTTON: \"input[name='submitbutton']\",\n            SECTIONSELECTOR: \".concordancequestionsection\",\n            FORMSELECTOR: \"#generatestudentquizform\",\n            QUIZNAME: \"#generatestudentquizform input[name='name']\",\n            QUESTIONSINCLUDEERROR: \"#questionstoincludeerror\",\n            PANELISTSINCLUDEERROR: \"#paneliststoincludeerror\"\n        };\n\n        var validateform = function () {\n            if ($(SELECTORS.PANELISTSSELECTEDCHECKBOXES).length > 0 &&\n                    $(SELECTORS.QUESTIONSSELECTEDCHECKBOXES).length > 0 &&\n                    $(SELECTORS.QUIZNAME).val() !== '') {\n                $(SELECTORS.SUBMITBUTTON).prop('disabled', false);\n            } else {\n                $(SELECTORS.SUBMITBUTTON).prop('disabled', true);\n            }\n            if ($(SELECTORS.PANELISTSSELECTEDCHECKBOXES).length === 0) {\n                $(SELECTORS.PANELISTSINCLUDEERROR).show();\n            } else {\n                $(SELECTORS.PANELISTSINCLUDEERROR).hide();\n            }\n            if ($(SELECTORS.QUESTIONSSELECTEDCHECKBOXES).length === 0) {\n                $(SELECTORS.QUESTIONSINCLUDEERROR).show();\n            } else {\n                $(SELECTORS.QUESTIONSINCLUDEERROR).hide();\n            }\n        };\n\n        var checkquestionremove = function () {\n            var valid = true;\n            $(SELECTORS.SECTIONSELECTOR).each(function() {\n                if ($(this).find(SELECTORS.QUESTIONSSELECTEDCHECKBOXES).length === 0) {\n                    valid = false;\n                    return false;\n                }\n            });\n\n            if (valid === false) {\n                Y.use('moodle-core-notification-alert', function() {\n                    var alert = new M.core.alert({\n                        title: M.util.get_string('cannotremoveslots', 'mod_quiz'),\n                        message: M.util.get_string('cannotremoveallsectionslots', 'mod_concordance')\n                    });\n\n                    alert.show();\n                });\n                return false;\n            }\n            return true;\n        };\n\n        return /** @alias module:mod_concordance/studentquizgeneration */ {\n            // Public variables and functions.\n\n            /**\n             * Initialise.\n             *\n             * @method init\n             */\n            'init': function() {\n                $(SELECTORS.SUBMITBUTTON).prop('disabled', true);\n                $(SELECTORS.PANELISTSCHECKBOXES + ',' + SELECTORS.QUESTIONSCHECKBOXES).on('change', function() {\n                    // Enable/disable submitbutton.\n                    validateform();\n                });\n                $(SELECTORS.QUIZNAME).on('change', function() {\n                    // Enable/disable submitbutton.\n                    validateform();\n                });\n                validateform();\n                // Check questions removal on submit.\n                $(SELECTORS.FORMSELECTOR).on(\"submit\", function(){\n                    return checkquestionremove();\n                });\n            }\n        };\n    });\n"],"file":"studentquizgeneration.min.js"}